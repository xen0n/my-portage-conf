From c333366916def8c2488cc0485cd6e39bc8ae65b6 Mon Sep 17 00:00:00 2001
From: sutong <sutong@loongson.cn>
Date: Fri, 30 Jul 2021 17:07:04 +0800
Subject: [PATCH 03/11] bintils: add  jmp-insn "b"

    opcodes/
    * loongarch-opc.c (loongarch_jmp_opcodes): Add "b" insn.
---
 opcodes/loongarch-opc.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/opcodes/loongarch-opc.c b/opcodes/loongarch-opc.c
index 7de81d47c82..541d660a972 100644
--- a/opcodes/loongarch-opc.c
+++ b/opcodes/loongarch-opc.c
@@ -730,7 +730,6 @@ static struct loongarch_opcode loongarch_jmp_opcodes[] =
   { 0x64000000, 0xfc00001f, "bgez", "r5:5,sb10:16<<2", 0, 0, 0, 0 },
   { 0, 0, "blez", "r,la", "blez %1,%%pcrel(%2)", 0, 0, 0 },
   { 0x64000000, 0xfc0003e0, "blez", "r0:5,sb10:16<<2", 0, 0, 0, 0 },
-
   { 0, 0, "beqz", "r,la", "beqz %1,%%pcrel(%2)", 0, 0, 0 },
   { 0x40000000, 0xfc000000, "beqz", "r5:5,sb0:5|10:16<<2", 0, 0, 0, 0 },
   { 0, 0, "bnez", "r,la", "bnez %1,%%pcrel(%2)", 0, 0, 0 },
@@ -740,6 +739,8 @@ static struct loongarch_opcode loongarch_jmp_opcodes[] =
   { 0, 0, "bcnez", "c,la", "bcnez %1,%%pcrel(%2)", 0, 0, 0 },
   { 0x48000100, 0xfc000300, "bcnez", "c5:3,sb0:5|10:16<<2", 0, 0, 0, 0 },
   { 0, 0, "jr", "r", "jirl $r0,%1,0", 0, 0, 0 },
+  { 0, 0, "b", "la", "b %%pcrel(%1)", 0, 0, 0},
+  { 0x50000000, 0xfc000000, "b", "sb0:10|10:16<<2", 0, 0, 0, 0},
   { 0x4c000000, 0xfc000000, "jirl", "r0:5,r5:5,s10:16<<2", 0, 0, 0, 0 },
   { 0, 0, "bl", "la", "bl %%pcrel(%1)", 0, 0, 0 },
   { 0x54000000, 0xfc000000, "bl", "sb0:10|10:16<<2", 0, 0, 0, 0 },
-- 
2.30.1

